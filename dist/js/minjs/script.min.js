const productList=document.querySelector(".product__items"),spinerAnimation=document.querySelector(".product__more"),spinner='<span class="spinner"></span>';let countCard=0;function createCard(e){const t=document.createElement("li");if(t.className="product-item",t.setAttribute("data-cart",`${e.id}`),e){const n=function(e){const t=Math.floor(e),n=Math.ceil(e-t);let s="";for(let e=1;e<t;e++)s+='<span class="star" data-index="5">\n            <svg xmlns="http://www.w3.org/2000/svg" height="16" width="18" viewBox="0 0 576 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--\x3e<path opacity="1" fill="#1E3050" d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"/></svg>\n            </span>';n>0&&(s+='<span class="star" data-index="5">\n            <svg xmlns="http://www.w3.org/2000/svg" height="16" width="18" viewBox="0 0 576 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--\x3e<path opacity="1" fill="#1E3050" d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"/></svg>\n            </span>');return s}(e.rating.rate),s=`\n        <div class="product-item__img-box">\n        <img class="product-item__images" src="${e.image}" alt="product 1">\n        <div class="product-item__box">\n            <a class="product-item__link" href="#">\n                <svg class="product-item__icon" fill="none">\n                    <use xlink:href="images/sprite.svg#search"></use>\n                </svg>\n            </a>\n            <a class="product-item__link product-item__link--line" href="#" data-btn>\n                <svg class="product-item__icon" fill="none">\n                    <use xlink:href="images/sprite.svg#bag"></use>\n                </svg>\n            </a>\n            <a class="product-item__link" href="#">\n                <svg class="product-item__icon" fill="none">\n                    <use xlink:href="images/sprite.svg#heart"></use>\n                </svg>\n            </a>\n        </div>\n    </div>\n    <div class="product-item__star">${n}</div>\n    <h4 class="product-item__title">\n        ${e.title}\n    </h4>\n    <ul class="product-item__price">\n        <li class="product-item__new">$${e.price}</li>\n        <li class="product-item__old">$27.00</li>\n    </ul>\n        `;t.innerHTML=s}return t}spinerAnimation.addEventListener("click",(async function(e){if(e.preventDefault(),spinerAnimation.disabled=!0,!this.classList.contains("spinner")){this.classList.add("spinner"),this.innerHTML=spinner;try{const e=await fetch("https://fakestoreapi.com/products"),t=await e.json();console.log(t);for(let e=countCard;e<countCard+3&&e<t.length;e++){const n=createCard(t[e]);productList.appendChild(n)}countCard+=3}catch(e){console.error(`errrrrrrrrrr ${e}`)}finally{this.classList.remove("spinner"),this.innerHTML="LOAD MORE",spinerAnimation.disabled=!1}}})),activeStars(".product-item__star"),function(){const e=[...document.querySelector(".menu__user").children],t=e[e.length-2],n=e[e.length-1],s=document.querySelectorAll(".menu__user-num"),o=document.querySelector(".cart__inner"),i=document.querySelector("[data-count]");let c=[],a=0;function r(e){e.forEach((e=>{const t=parseInt(e.textContent);e.style.display=t<1?"none":"block"}))}function l(e,t){const n=`\n        <li class="cart__item" data-id="${t.id}">\n            <img class="cart__img" src="${t.imgSrc}" alt="nothing">\n            <div class="cart-counter">\n                <button class="cart-counter__plus" type="button" data-plus>+</button>\n                <span class="cart-counter__count" data-counter>${t.quantity}</span>\n                <button class="cart-counter__minus" type="button" data-minus>-</button>\n            </div>\n            <p class="cart__info">${t.title}</p>\n            <p class="cart__amount">${t.price}</p>\n        </li>`;e.insertAdjacentHTML("beforeend",n)}function d(){i.innerHTML=a,r(s),u()}function u(){localStorage.setItem("cart",JSON.stringify(c)),localStorage.setItem("countCart",a)}function p(e){let t=0;const n=document.querySelectorAll(".cart__item"),s=document.querySelector(e);s?(n.forEach((e=>{const n=parseInt(e.querySelector("[data-counter]").textContent),s=parseInt(e.querySelector(".cart__amount").textContent.slice(1)),o=parseFloat(s);if(!isNaN(o)){t+=n*s}})),s.textContent=`$${t}`):console.error("Element not found")}t.addEventListener("click",(e=>{e.stopPropagation(),n.classList.toggle("active-cart")})),document.addEventListener("click",(function(e){!(o.contains(e.target)||t.contains(e.target))&&n.classList.contains("active-cart")&&n.classList.remove("active-cart")})),document.querySelector(".cart__clear").addEventListener("click",(()=>{c.splice(0,c.length),a=0,u(),p("[data-price]"),d()})),document.addEventListener("click",(function(e){const t=e.target.closest("[data-btn]"),n=e.target.closest("[data-plus]"),i=e.target.closest("[data-minus]");if(t){e.preventDefault();const n=t.closest(".product-item"),i=n.dataset.cart,f=c.find((e=>e.id===i));if(f)f.quantity++,m=f,document.querySelector(`.cart__item[data-id="${m.id}"]`).querySelector("[data-counter]").textContent=m.quantity;else{const e={id:i,imgSrc:n.querySelector(".product-item__images").getAttribute("src"),title:n.querySelector(".product-item__title").textContent,price:n.querySelector(".product-item__new").innerHTML,quantity:1};c.push(e),l(o,e),r(s),p("[data-price]")}a++,u(),d()}else if(n||i){const t=e.target.closest(".cart__item"),s=t.querySelector("[data-counter]"),o=t.dataset.id;if(n){const e=c.findIndex((e=>e.id===o));-1!==e&&(c[e].quantity++,s.textContent=c[e].quantity,a++)}else if(i){const e=c.findIndex((e=>e.id===o));-1!==e&&c[e].quantity>1?(c[e].quantity--,s.textContent=c[e].quantity,a--):(c.splice(e,1),t.remove(),a--,d())}u(),d(),p("[data-price]")}var m})),function(e){c=JSON.parse(localStorage.getItem("cart"))||[],a=JSON.parse(localStorage.getItem("countCart"))||0;for(let t in c)l(e,c[t]);d(),p("[data-price]")}(o)}();const confirmBtn=document.querySelector(".order-form__submit"),orderContainer=document.querySelector(".order-form__order"),localStor=localStorage;function getDataForLocalS(e,t){const n=e.getItem("cart");if(n){JSON.parse(n).forEach((e=>{console.log(e),addOrderData(t,e)}))}}function addOrderData(e,t){const n=`\n    <li class="order-form__product">\n    <img class="order-form__images" src="${t.imgSrc}" alt="photo 1">\n    <p class="order-form__info">${t.title}</p>\n    <span class="order-form__price">${t.price}</span>\n</li>\n    `;e.insertAdjacentHTML("beforeend",n)}getDataForLocalS(localStor,orderContainer);const overlay=document.querySelector(".overlay"),popupWindow=document.querySelector(".popup"),closeBtn=document.querySelector(".close"),playBtn=document.querySelector(".fasion__item"),frame=document.querySelector(".popup__frame");let scrollPosition=0;function playVideo(){popupWindow.classList.remove("active-popup"),overlay.style.display="block",frame.setAttribute("src","//www.youtube.com/embed?v=ShjzEckueZU&list=PL0cA19vPhtoXfSpSGq4Hi00YGRaRKBSMS&index=3")}function closePopup(){popupWindow.classList.add("active-popup"),overlay.style.display="none",frame.setAttribute("src",""),scrollEnable()}function scrollFixed(){scrollPosition=window.scrollY,document.body.style.overflow="hidden",document.body.style.top=-scrollPosition+"px"}function scrollEnable(){document.body.style.overflow="",document.body.style.position="",document.body.style.top="",window.scrollTo(0,scrollPosition)}playBtn.addEventListener("click",(function(e){e.preventDefault(),e.target===playBtn&&(playVideo(),scrollFixed())})),closeBtn.addEventListener("click",closePopup),window.onclick=function(e){e.target.classList.contains("overlay")&&(popupWindow.classList.add("active-popup"),overlay.style.display="none",frame.setAttribute("src",""),scrollEnable())};const boxSlider=document.querySelector(".top-slider__box"),slidesContainer=document.querySelector(".top-slider__inner"),slideWidth=slidesContainer.clientWidth;let slides=[...slidesContainer.children];console.log(slides.length);const firstCloneSlide=slides[0].cloneNode(!0),lastClonedSlide=slides[slides.length-1].cloneNode(!0);firstCloneSlide.classList.add("clonefirst"),lastClonedSlide.classList.add("clonelast"),slidesContainer.append(firstCloneSlide),slidesContainer.prepend(lastClonedSlide),slidesContainer.style.transform=`translateX(-${slideWidth}px)`;let position,ind=1;console.log(slides);const settingsSlider={autoslide:!1,interval:4e3},createDots=(e,t)=>{const n=document.createElement("ul");return n.classList.add("dots"),t.forEach(((e,t)=>{const s=document.createElement("li");s.classList.add("dot"),0===t&&s.classList.add("active-dots"),s.addEventListener("click",(()=>{n.querySelectorAll(".dot").forEach((e=>e.classList.remove("active-dots"))),s.classList.add("active-dots"),ind=t+1,slidesContainer.style.transition="all 0.5s linear",slidesContainer.style.transform=`translateX(-${slideWidth*ind}px)`})),n.appendChild(s)})),e.appendChild(n),n},startAutoSlide=()=>{settingsSlider.autoslide&&(position=setInterval(nextSlide,settingsSlider.interval))},newCloneNideList=()=>[...slidesContainer.children];function nextSlide(){ind>=slides.length-1||(ind++,updateDostsPosition(),updateSlidePosition())}function prevSlide(){ind<=0||updateSlidePosition()}function updateDostsPosition(){document.querySelectorAll(".dot").forEach(((e,t)=>{e.classList.remove("active-dots"),t===ind-1&&e.classList.add("active-dots")}))}function updateSlidePosition(){slidesContainer.style.transition="all 0.5s linear",slidesContainer.style.transform=`translateX(-${slideWidth*ind}px)`}function resize(){slidesContainer.style.width=slideWidth*`${slides.length}px`,slides.forEach((e=>{e.style.width=`${slideWidth}px`,e.style.height="auto"}))}function activeStars(e){const t=document.querySelectorAll(e);t?t.forEach((e=>{e.innerHTML='\n            <span class="star" data-index="1">\n                <svg xmlns="http://www.w3.org/2000/svg" height="16" width="18" viewBox="0 0 576 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--\x3e<path opacity="1" fill="#ffc35b" d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"/></svg>\n            </span>\n            <span class="star" data-index="2">\n                <svg xmlns="http://www.w3.org/2000/svg" height="16" width="18" viewBox="0 0 576 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--\x3e<path opacity="1" fill="#1E3050" d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"/></svg>\n            </span>\n            <span class="star" data-index="3">\n                <svg xmlns="http://www.w3.org/2000/svg" height="16" width="18" viewBox="0 0 576 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--\x3e<path opacity="1" fill="#1E3050" d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"/></svg>\n            </span>\n            <span class="star" data-index="4">\n                <svg xmlns="http://www.w3.org/2000/svg" height="16" width="18" viewBox="0 0 576 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--\x3e<path opacity="1" fill="#1E3050" d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"/></svg>\n            </span>\n            <span class="star" data-index="5">\n                <svg xmlns="http://www.w3.org/2000/svg" height="16" width="18" viewBox="0 0 576 512">\x3c!--!Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2023 Fonticons, Inc.--\x3e<path opacity="1" fill="#1E3050" d="M316.9 18C311.6 7 300.4 0 288.1 0s-23.4 7-28.8 18L195 150.3 51.4 171.5c-12 1.8-22 10.2-25.7 21.7s-.7 24.2 7.9 32.7L137.8 329 113.2 474.7c-2 12 3 24.2 12.9 31.3s23 8 33.8 2.3l128.3-68.5 128.3 68.5c10.8 5.7 23.9 4.9 33.8-2.3s14.9-19.3 12.9-31.3L438.5 329 542.7 225.9c8.6-8.5 11.7-21.2 7.9-32.7s-13.7-19.9-25.7-21.7L381.2 150.3 316.9 18z"/></svg>\n            </span>\n        ';const t=e.querySelectorAll(".star");function n(e){const n=e.target.dataset.index;t.forEach(((e,t)=>{t<n?e.classList.add("active"):e.classList.remove("active")}))}function s(){const n=e.dataset.rating||0;t.forEach(((e,t)=>{t<n?e.classList.add("active"):e.classList.remove("active")}))}function o(t){const n=t.target.dataset.index;e.dataset.rating=n,s()}t.forEach((e=>{e.addEventListener("mouseenter",n),e.addEventListener("mouseleave",s),e.addEventListener("click",o)}))})):console.error(`Element ${e} is not found`)}slidesContainer.addEventListener("transitionend",(function(){slides=[...slidesContainer.children],slides[ind].classList.contains("clonefirst")&&(slidesContainer.style.transition="none",ind=1,slidesContainer.style.transform=`translateX(-${slideWidth*ind}px)`),slides[ind].classList.contains("clonelast")&&(slidesContainer.style.transition="none",ind=slides.length-2,slidesContainer.style.transform=`translateX(-${slideWidth*ind}px)`)})),boxSlider.addEventListener("mouseenter",(function(){clearInterval(position)})),boxSlider.addEventListener("mouseleave",startAutoSlide),window.addEventListener("resize",resize),createDots(boxSlider,slides),startAutoSlide(),activeStars(".product-item__star");export function initTimer(){let e;function t(e){const t=Date.parse(e)-Date.parse(new Date);return{days:Math.floor(t/864e5),hours:Math.floor(t/36e5%24),minutes:Math.floor(t/6e4%60),seconds:Math.floor(t/1e3%60),total:t}}return{initialized:function(n,s){const o=document.querySelectorAll(".timer__box"),i=document.querySelectorAll(".timer__box span"),c=document.querySelector(".days"),a=document.querySelector(".hours"),r=document.querySelector(".minutes"),l=document.querySelector(".seconds");function d(){const n=t(s);c.innerHTML=n.days,a.innerHTML=`0${n.hours}`.slice(-2),r.innerHTML=`0${n.minutes}`.slice(-2),l.innerHTML=`0${n.seconds}`.slice(-2),n.days<=1&&o.forEach((e=>{e.classList.add("attention"),i.forEach((e=>{e.style.color="#fff"}))})),n.total<=0&&clearInterval(e)}d(),e=setInterval(d,1e3)},getTimer:t}}const timerModule=initTimer(),deadline=document.querySelector(".promo__timer").getAttribute("data-time");timerModule.initialized(".promo__timer",deadline);